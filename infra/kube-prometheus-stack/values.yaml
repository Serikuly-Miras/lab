grafana:
  persistence:
    enabled: true
    type: sts
    accessModes:
      - ReadWriteOnce
    size: 10Gi
    storageClassName: longhorn
    finalizers:
      - kubernetes.io/pvc-protection
prometheus:
  enabled: true
  prometheusSpec:
    enableOTLPReceiver: true
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: longhorn
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 10Gi
    retention: 60d
    additionalScrapeConfigs:
      - job_name: postgres
        scrape_interval: 5s
        static_configs:
          - targets:
              [
                "prometheus-postgres-exporter.prometheus-postgres-exporter.svc.cluster.local:80",
              ]
      - job_name: "pve-node-exporter"
        scrape_interval: 5s
        static_configs:
          - targets: ["192.168.10.20:9100"]
      - job_name: "gitlab-node-exporter"
        scrape_interval: 5s
        static_configs:
          - targets: ["192.168.10.51:9100"]
      - job_name: "hetzner-vps-node-exporter"
        scrape_interval: 5s
        static_configs:
          - targets: ["hz:9100"] # tailscale hostname
      - job_name: "pg-master-node-exporter"
        scrape_interval: 5s
        static_configs:
          - targets: ["192.168.10.41:9100"]
